{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"訂單\", -1 /* HOISTED */);\nconst _hoisted_2 = {\n  class: \"container\"\n};\nconst _hoisted_3 = {\n  class: \"row\"\n};\nconst _hoisted_4 = {\n  class: \"col-4\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"col-4\\\"><div class=\\\"form-check form-check-inline\\\"><input class=\\\"form-check-input\\\" type=\\\"radio\\\" name=\\\"inlineRadioOptions\\\" id=\\\"inlineRadio1\\\" value=\\\"option1\\\"><label class=\\\"form-check-label\\\" for=\\\"inlineRadio1\\\">已付款</label></div><div class=\\\"form-check form-check-inline\\\"><input class=\\\"form-check-input\\\" type=\\\"radio\\\" name=\\\"inlineRadioOptions\\\" id=\\\"inlineRadio2\\\" value=\\\"option2\\\"><label class=\\\"form-check-label\\\" for=\\\"inlineRadio2\\\">未付款</label></div></div>\", 1);\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */);\nconst _hoisted_7 = {\n  class: \"table table-bordered\"\n};\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", {\n  scope: \"col\"\n}, \"#\"), /*#__PURE__*/_createElementVNode(\"th\", {\n  scope: \"col\"\n}, \"訂單編號\"), /*#__PURE__*/_createElementVNode(\"th\", {\n  scope: \"col\"\n}, \"產品項目\"), /*#__PURE__*/_createElementVNode(\"th\", {\n  scope: \"col\"\n}, \"金額\"), /*#__PURE__*/_createElementVNode(\"th\", {\n  scope: \"col\"\n}, \"是否付款\"), /*#__PURE__*/_createElementVNode(\"th\", {\n  scope: \"col\"\n}, \"物流狀態\"), /*#__PURE__*/_createElementVNode(\"th\", {\n  scope: \"col\"\n}, \"訂單日期\")])], -1 /* HOISTED */);\nconst _hoisted_9 = {\n  scope: \"row\"\n};\nconst _hoisted_10 = {\n  class: \"table table-borderless\"\n};\nconst _hoisted_11 = {\n  \"aria-label\": \"Page navigation example\"\n};\nconst _hoisted_12 = {\n  class: \"pagination\"\n};\nconst _hoisted_13 = {\n  key: 0,\n  class: \"page-item\"\n};\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = {\n  key: 1,\n  class: \"page-item\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _createCommentVNode(\" 查詢 \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.select = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.select]])]), _hoisted_5])]), _hoisted_6, _createElementVNode(\"table\", _hoisted_7, [_hoisted_8, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.orders, (item, index) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: item.id\n    }, [_createCommentVNode(\" 取得陣列序號 \"), _createElementVNode(\"th\", _hoisted_9, _toDisplayString(index + 1), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.ord_number), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createCommentVNode(\" 產品點擊顯示 資料在orders的orderproduct Json格式\"), _createElementVNode(\"table\", _hoisted_10, [_createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.orderproduct, (item, index) => {\n      return _openBlock(), _createElementBlock(\"tr\", {\n        key: item.id\n      }, [_createElementVNode(\"td\", null, _toDisplayString(item.ord_product_title), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.ord_product_price), 1 /* TEXT */)]);\n    }), 128 /* KEYED_FRAGMENT */))])])]), _createElementVNode(\"td\", null, _toDisplayString(item.ord_total), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.ord_state), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.ord_logistics), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.createdAt), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createCommentVNode(\" 分頁 \"), _createElementVNode(\"nav\", _hoisted_11, [_createElementVNode(\"ul\", _hoisted_12, [$data.TempPage > 1 ? (_openBlock(), _createElementBlock(\"li\", _hoisted_13, [_createElementVNode(\"a\", {\n    class: \"page-link\",\n    href: \"\",\n    onClick: _cache[1] || (_cache[1] = _withModifiers($event => $options.pageChange($options.page - 1), [\"prevent\"]))\n  }, \"Previous\")])) : _createCommentVNode(\"v-if\", true), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.pages, page => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      class: \"page-item\",\n      key: page\n    }, [_createElementVNode(\"a\", {\n      class: \"page-link\",\n      href: \"\",\n      onClick: _withModifiers($event => $options.pageChange(page), [\"prevent\"])\n    }, _toDisplayString(page), 9 /* TEXT, PROPS */, _hoisted_14)]);\n  }), 128 /* KEYED_FRAGMENT */)), $options.page < $options.pages ? (_openBlock(), _createElementBlock(\"li\", _hoisted_15, [_createElementVNode(\"a\", {\n    class: \"page-link\",\n    href: \"\",\n    onClick: _cache[2] || (_cache[2] = _withModifiers($event => $options.pageChange($options.page + 1), [\"prevent\"]))\n  }, \"Next\")])) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" <nav aria-label=\\\"Page navigation example\\\">\\r\\n    <ul class=\\\"pagination\\\">\\r\\n      <li class=\\\"page-item\\\">\\r\\n        <a class=\\\"page-link\\\" href=\\\"#\\\" aria-label=\\\"Previous\\\">\\r\\n          <span aria-hidden=\\\"true\\\">&laquo;</span>\\r\\n        </a>\\r\\n      </li>\\r\\n      <li class=\\\"page-item\\\"><a class=\\\"page-link\\\" href=\\\"#\\\">1</a></li>\\r\\n      <li class=\\\"page-item\\\"><a class=\\\"page-link\\\" href=\\\"#\\\">2</a></li>\\r\\n      <li class=\\\"page-item\\\"><a class=\\\"page-link\\\" href=\\\"#\\\">3</a></li>\\r\\n      <li class=\\\"page-item\\\">\\r\\n        <a class=\\\"page-link\\\" href=\\\"#\\\" aria-label=\\\"Next\\\">\\r\\n          <span aria-hidden=\\\"true\\\">&raquo;</span>\\r\\n        </a>\\r\\n      </li>\\r\\n    </ul>\\r\\n  </nav> \")], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":"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","names":["_createElementVNode","class","scope","_hoisted_1","_createCommentVNode","_hoisted_2","_hoisted_3","_hoisted_4","type","$data","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_createElementBlock","_Fragment","$options","item","index","key","id","_hoisted_9","ord_number","_hoisted_10","orderproduct","ord_product_title","ord_product_price","ord_total","ord_state","ord_logistics","createdAt","_hoisted_11","_hoisted_12","_hoisted_13","href","onClick","page","_hoisted_15"],"sourceRoot":"","sources":["D:\\sshstudiocode\\Vue\\vue-3-authentication-jwt-shoppingcart\\src\\components\\package\\Order.vue"],"sourcesContent":["<template>\r\n  <h1>訂單</h1>\r\n  <!-- 查詢 -->\r\n  <div class=\"container\">\r\n    <div class=\"row\">\r\n      <div class=\"col-4\">\r\n        <input type=\"text\" v-model=\"select\">\r\n\r\n      </div>\r\n      <div class=\"col-4\">\r\n        <div class=\"form-check form-check-inline\">\r\n          <input class=\"form-check-input\" type=\"radio\" name=\"inlineRadioOptions\" id=\"inlineRadio1\" value=\"option1\" >\r\n          <label class=\"form-check-label\" for=\"inlineRadio1\" >已付款</label>\r\n        </div>\r\n        <div class=\"form-check form-check-inline\">\r\n          <input class=\"form-check-input\" type=\"radio\" name=\"inlineRadioOptions\" id=\"inlineRadio2\" value=\"option2\">\r\n          <label class=\"form-check-label\" for=\"inlineRadio2\">未付款</label>\r\n        </div>\r\n        \r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <hr>\r\n\r\n  <table class=\"table table-bordered\">\r\n    <thead>\r\n      <tr>\r\n        <th scope=\"col\">#</th>\r\n        <th scope=\"col\">訂單編號</th>\r\n        <th scope=\"col\">產品項目</th>\r\n        <th scope=\"col\">金額</th>\r\n        <th scope=\"col\">是否付款</th>\r\n        <th scope=\"col\">物流狀態</th>\r\n        <th scope=\"col\">訂單日期</th>\r\n\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"(item, index) in orders\" :key=\"item.id\">\r\n        <!-- 取得陣列序號 -->\r\n        <th scope=\"row\">{{ index + 1 }}</th>\r\n        <td>{{ item.ord_number }}</td>\r\n\r\n        <td>\r\n          <!-- 產品點擊顯示 資料在orders的orderproduct Json格式-->\r\n\r\n\r\n\r\n\r\n          <table class=\"table table-borderless\">\r\n\r\n            <tbody>\r\n              <tr v-for=\"(item, index) in item.orderproduct\" :key=\"item.id\">\r\n                <td>{{ item.ord_product_title }}</td>\r\n                <td>{{ item.ord_product_price }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n\r\n\r\n        </td>\r\n\r\n        <td>{{ item.ord_total }}</td>\r\n        <td>{{ item.ord_state }}</td>\r\n        <td>{{ item.ord_logistics }}</td>\r\n        <td>{{ item.createdAt }}</td>\r\n\r\n      </tr>\r\n    </tbody>\r\n\r\n  </table>\r\n\r\n  <!-- 分頁 -->\r\n\r\n  <nav aria-label=\"Page navigation example\">\r\n    <ul class=\"pagination\">\r\n      <li class=\"page-item\" v-if=\"TempPage > 1\">\r\n        <a class=\"page-link\" href=\"\" @click.prevent=\"pageChange(page - 1)\">Previous</a>\r\n      </li>\r\n      <li class=\"page-item\" v-for=\"page in pages\" :key=\"page\">\r\n        <a class=\"page-link\" href=\"\" @click.prevent=\"pageChange(page)\">{{ page }}</a>\r\n      </li>\r\n      <li class=\"page-item\" v-if=\"page < pages\">\r\n        <a class=\"page-link\" href=\"\" @click.prevent=\"pageChange(page + 1)\">Next</a>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n\r\n  <!-- <nav aria-label=\"Page navigation example\">\r\n    <ul class=\"pagination\">\r\n      <li class=\"page-item\">\r\n        <a class=\"page-link\" href=\"#\" aria-label=\"Previous\">\r\n          <span aria-hidden=\"true\">&laquo;</span>\r\n        </a>\r\n      </li>\r\n      <li class=\"page-item\"><a class=\"page-link\" href=\"#\">1</a></li>\r\n      <li class=\"page-item\"><a class=\"page-link\" href=\"#\">2</a></li>\r\n      <li class=\"page-item\"><a class=\"page-link\" href=\"#\">3</a></li>\r\n      <li class=\"page-item\">\r\n        <a class=\"page-link\" href=\"#\" aria-label=\"Next\">\r\n          <span aria-hidden=\"true\">&raquo;</span>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </nav> -->\r\n\r\n\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      ordersTemp: [],\r\n      user_id: '',\r\n      select: '',\r\n\r\n\r\n      TempPage: '',\r\n      // TempPage: 暫存頁數\r\n      // pages: '',\r\n      // 總頁數\r\n      pageLimit: 20,\r\n      // 一頁顯示幾筆\r\n      pageStart: 0,\r\n      // 起始頁數\r\n      pageEnd: 20,\r\n      // 結束頁數\r\n      // ProductsID: [],\r\n      // ProductsID: 顯示的產品\r\n      // pageID: '',\r\n      // pageID: 沒用到拿來觀察是否取到\r\n\r\n    }\r\n  },\r\n\r\n  mounted: function () {\r\n    // 取得本地端user的id\r\n    let user = JSON.parse(localStorage.getItem('user'));\r\n    this.user_id = user.id\r\n\r\n\r\n    // axios取得訂單資料\r\n    axios.get('http://192.168.68.60:8082/api/products/getOrderProductsUser/' + this.user_id)\r\n      .then((res) => {\r\n        this.ordersTemp = res.data\r\n        console.log(this.orders)\r\n      })\r\n      .catch((err) => {\r\n        console.log(err)\r\n      })\r\n\r\n\r\n  },\r\n\r\n  methods: {\r\n    pageChange(b) {\r\n      this.TempPage = b\r\n      this.pageStart = (this.TempPage - 1) * this.pageLimit\r\n      this.pageEnd = this.pageStart + this.pageLimit\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    // orders的createdAt取得年月日\r\n    orders() {\r\n      // 判斷select有值,執行分割日期字串與頁數統計,回傳select的查詢結果 \r\n\r\n\r\n      if (this.select != '') {\r\n        this.ordersTemp.forEach((item) => {\r\n          // forEach:陣列迴圈\r\n          item.createdAt = item.createdAt.split('T')[0]\r\n          // split:分割字串\r\n        })\r\n        return this.ordersTemp.filter\r\n          (searchResult => searchResult.ord_number.includes(this.select)).slice(this.pageStart, this.pageEnd);\r\n      } else {\r\n        this.ordersTemp.forEach((item) => {\r\n          // forEach:陣列迴圈\r\n          item.createdAt = item.createdAt.split('T')[0]\r\n          // split:分割字串\r\n        })\r\n        return this.ordersTemp.slice(this.pageStart, this.pageEnd);\r\n\r\n      }\r\n\r\n\r\n\r\n      // this.ordersTemp.forEach((item) => {\r\n      //   // forEach:陣列迴圈\r\n      //   item.createdAt = item.createdAt.split('T')[0]\r\n      //   // split:分割字串\r\n      // })\r\n      // return this.ordersTemp.filter\r\n      //   (searchResult => searchResult.ord_number.includes(this.select));\r\n\r\n\r\n    },\r\n\r\n\r\n\r\n    // 計算orders總頁數\r\n    page() {\r\n\r\n      if (this.select != '') {\r\n        if (this.page > this.pages) {\r\n          this.pageStart = 0,\r\n            this.pageEnd = this.pageStart + this.pageLimit\r\n          this.TempPage = 1\r\n          return 1\r\n        }\r\n\r\n        return this.TempPage\r\n        // , this.pageStart = 0, this.pageEnd = this.pageStart + this.pageLimit\r\n        // return this.TempPage\r\n        // this.page: 當前頁數\r\n        // page: 當前頁數\r\n      }\r\n      else {\r\n        return this.TempPage\r\n      }\r\n      // TempPage: 預設第一頁(只有開啟網頁觸發),只有變動才會觸發以下的判斷\r\n      // 判斷: 如果page大於pages就回到第一頁\r\n      // 判斷: titleSearch有變動就回到第一頁\r\n    },\r\n\r\n\r\n\r\n    pages() {\r\n      if (this.select == '') {\r\n        // titleSearch: 搜尋的標題有變動就會觸發\r\n        return Math.ceil(this.ordersTemp.length / this.pageLimit)\r\n        // 計算頁數 ordersTemp\r\n\r\n      } else {\r\n        return Math.ceil(this.orders.length / this.pageLimit)\r\n        // 計算頁數 orders\r\n      }\r\n    },\r\n\r\n\r\n  },\r\n\r\n}\r\n\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}