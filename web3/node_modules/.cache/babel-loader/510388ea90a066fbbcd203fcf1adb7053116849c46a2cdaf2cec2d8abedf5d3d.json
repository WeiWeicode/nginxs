{"ast":null,"code":"import { createWebHistory, createRouter } from \"vue-router\";\nimport Home from \"./components/Home.vue\";\nimport Login from \"./components/Login.vue\";\nimport Register from \"./components/Register.vue\";\n// lazy-loaded\nconst Profile = () => import(\"./components/Profile.vue\");\nconst BoardAdmin = () => import(\"./components/BoardAdmin.vue\");\nconst BoardModerator = () => import(\"./components/BoardModerator.vue\");\nconst BoardUser = () => import(\"./components/BoardUser.vue\");\nconst Payment = () => import(\"./components/package/Payment.vue\");\nconst PayPage = () => import(\"./components/package/PayPage.vue\");\nconst routes = [{\n  path: \"/\",\n  name: \"home\",\n  component: Home\n}, {\n  path: \"/home\",\n  component: Home\n}, {\n  path: \"/login\",\n  component: Login\n}, {\n  path: \"/register\",\n  component: Register\n}, {\n  path: \"/profile\",\n  name: \"profile\",\n  // lazy-loaded\n  component: Profile\n}, {\n  path: \"/admin\",\n  name: \"admin\",\n  // lazy-loaded\n  component: BoardAdmin\n}, {\n  path: \"/mod\",\n  name: \"moderator\",\n  // lazy-loaded\n  component: BoardModerator\n}, {\n  path: \"/user\",\n  name: \"user\",\n  // lazy-loaded\n  component: BoardUser\n},\n// 測試用\n{\n  path: \"/payment\",\n  name: \"payment\",\n  component: Payment\n}];\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n});\n// router: 路由\n// createRouter: 創建路由\n// createWebHistory: 創建Web歷史記錄\n\nrouter.beforeEach((to, from, next) => {\n  const publicPages = ['/login', '/register', '/home'];\n  const authRequired = !publicPages.includes(to.path);\n  const loggedIn = localStorage.getItem('user');\n  // beforeEarch: 路由守衛\n  // to: 要去的路由\n  // from: 來自哪個路由\n  // next: 跳轉到哪個路由\n  // publicPages: 公共頁面\n  // authRequired: 需要驗證的頁面\n  // loggedIn: 登入的頁面\n\n  //   // trying to access a restricted page + not logged in\n  //   // redirect to login page\n  if (authRequired && !loggedIn) {\n    next('/login');\n  } else {\n    next();\n  }\n  // authRequired && !loggedIn: 需要驗證的頁面 + 沒有登入\n  // next('/login'): 跳轉到登入頁面\n});\n\nexport default router;","map":{"version":3,"names":["createWebHistory","createRouter","Home","Login","Register","Profile","BoardAdmin","BoardModerator","BoardUser","Payment","PayPage","routes","path","name","component","router","history","beforeEach","to","from","next","publicPages","authRequired","includes","loggedIn","localStorage","getItem"],"sources":["D:/sshstudiocode/Vue/vue-3-authentication-jwt-shoppingcart/src/router.js"],"sourcesContent":["import { createWebHistory, createRouter } from \"vue-router\";\r\nimport Home from \"./components/Home.vue\";\r\nimport Login from \"./components/Login.vue\";\r\nimport Register from \"./components/Register.vue\";\r\n// lazy-loaded\r\nconst Profile = () => import(\"./components/Profile.vue\")\r\nconst BoardAdmin = () => import(\"./components/BoardAdmin.vue\")\r\nconst BoardModerator = () => import(\"./components/BoardModerator.vue\")\r\nconst BoardUser = () => import(\"./components/BoardUser.vue\")\r\nconst Payment = () => import(\"./components/package/Payment.vue\")\r\nconst PayPage = () => import(\"./components/package/PayPage.vue\")\r\n\r\nconst routes = [\r\n  {\r\n    path: \"/\",\r\n    name: \"home\",\r\n    component: Home,\r\n  },\r\n  {\r\n    path: \"/home\",\r\n    component: Home,\r\n  },\r\n  {\r\n    path: \"/login\",\r\n    component: Login,\r\n  },\r\n  {\r\n    path: \"/register\",\r\n    component: Register,\r\n  },\r\n  {\r\n    path: \"/profile\",\r\n    name: \"profile\",\r\n    // lazy-loaded\r\n    component: Profile,\r\n  },\r\n  {\r\n    path: \"/admin\",\r\n    name: \"admin\",\r\n    // lazy-loaded\r\n    component: BoardAdmin,\r\n  },\r\n  {\r\n    path: \"/mod\",\r\n    name: \"moderator\",\r\n    // lazy-loaded\r\n    component: BoardModerator,\r\n  },\r\n  {\r\n    path: \"/user\",\r\n    name: \"user\",\r\n    // lazy-loaded\r\n    component: BoardUser,\r\n  },\r\n\r\n// 測試用\r\n  {\r\n    path: \"/payment\",\r\n    name: \"payment\",\r\n\r\n    component: Payment,\r\n  }\r\n\r\n];\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(),\r\n  routes,\r\n});\r\n// router: 路由\r\n// createRouter: 創建路由\r\n// createWebHistory: 創建Web歷史記錄\r\n\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  const publicPages = ['/login', '/register', '/home'];\r\n  const authRequired = !publicPages.includes(to.path);\r\n  const loggedIn = localStorage.getItem('user');\r\n// beforeEarch: 路由守衛\r\n// to: 要去的路由\r\n// from: 來自哪個路由\r\n// next: 跳轉到哪個路由\r\n// publicPages: 公共頁面\r\n// authRequired: 需要驗證的頁面\r\n// loggedIn: 登入的頁面\r\n\r\n//   // trying to access a restricted page + not logged in\r\n//   // redirect to login page\r\n  if (authRequired && !loggedIn) {\r\n    next('/login');\r\n  } else {\r\n    next();\r\n  }\r\n  // authRequired && !loggedIn: 需要驗證的頁面 + 沒有登入\r\n  // next('/login'): 跳轉到登入頁面\r\n});\r\n\r\nexport default router;"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,YAAY,QAAQ,YAAY;AAC3D,OAAOC,IAAI,MAAM,uBAAuB;AACxC,OAAOC,KAAK,MAAM,wBAAwB;AAC1C,OAAOC,QAAQ,MAAM,2BAA2B;AAChD;AACA,MAAMC,OAAO,GAAG,MAAM,MAAM,CAAC,0BAA0B,CAAC;AACxD,MAAMC,UAAU,GAAG,MAAM,MAAM,CAAC,6BAA6B,CAAC;AAC9D,MAAMC,cAAc,GAAG,MAAM,MAAM,CAAC,iCAAiC,CAAC;AACtE,MAAMC,SAAS,GAAG,MAAM,MAAM,CAAC,4BAA4B,CAAC;AAC5D,MAAMC,OAAO,GAAG,MAAM,MAAM,CAAC,kCAAkC,CAAC;AAChE,MAAMC,OAAO,GAAG,MAAM,MAAM,CAAC,kCAAkC,CAAC;AAEhE,MAAMC,MAAM,GAAG,CACb;EACEC,IAAI,EAAE,GAAG;EACTC,IAAI,EAAE,MAAM;EACZC,SAAS,EAAEZ;AACb,CAAC,EACD;EACEU,IAAI,EAAE,OAAO;EACbE,SAAS,EAAEZ;AACb,CAAC,EACD;EACEU,IAAI,EAAE,QAAQ;EACdE,SAAS,EAAEX;AACb,CAAC,EACD;EACES,IAAI,EAAE,WAAW;EACjBE,SAAS,EAAEV;AACb,CAAC,EACD;EACEQ,IAAI,EAAE,UAAU;EAChBC,IAAI,EAAE,SAAS;EACf;EACAC,SAAS,EAAET;AACb,CAAC,EACD;EACEO,IAAI,EAAE,QAAQ;EACdC,IAAI,EAAE,OAAO;EACb;EACAC,SAAS,EAAER;AACb,CAAC,EACD;EACEM,IAAI,EAAE,MAAM;EACZC,IAAI,EAAE,WAAW;EACjB;EACAC,SAAS,EAAEP;AACb,CAAC,EACD;EACEK,IAAI,EAAE,OAAO;EACbC,IAAI,EAAE,MAAM;EACZ;EACAC,SAAS,EAAEN;AACb,CAAC;AAEH;AACE;EACEI,IAAI,EAAE,UAAU;EAChBC,IAAI,EAAE,SAAS;EAEfC,SAAS,EAAEL;AACb,CAAC,CAEF;AAED,MAAMM,MAAM,GAAGd,YAAY,CAAC;EAC1Be,OAAO,EAAEhB,gBAAgB,EAAE;EAC3BW;AACF,CAAC,CAAC;AACF;AACA;AACA;;AAGAI,MAAM,CAACE,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,MAAMC,WAAW,GAAG,CAAC,QAAQ,EAAE,WAAW,EAAE,OAAO,CAAC;EACpD,MAAMC,YAAY,GAAG,CAACD,WAAW,CAACE,QAAQ,CAACL,EAAE,CAACN,IAAI,CAAC;EACnD,MAAMY,QAAQ,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;EAC/C;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACE,IAAIJ,YAAY,IAAI,CAACE,QAAQ,EAAE;IAC7BJ,IAAI,CAAC,QAAQ,CAAC;EAChB,CAAC,MAAM;IACLA,IAAI,EAAE;EACR;EACA;EACA;AACF,CAAC,CAAC;;AAEF,eAAeL,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}